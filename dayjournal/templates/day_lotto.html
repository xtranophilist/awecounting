{%  extends "dashboard.html" %}

{% block title %}Day Journal for {{ day_journal.date }}{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    <li class="active"><a href="{% url "new_day_journal" %}">Day Journal</a></li>
{% endblock %}

{% block head_end %}
    <script src="http://localhost/acubor_static/js/vendors/knockout.js"></script>
    <script src="http://localhost/acubor_static/js/ko_lib.js"></script>
    <script src="http://localhost/acubor_static/js/base.js"></script>
    <script src="http://localhost/acubor_static/js/lotto.js"></script>
    <script>
        $(document).ready(function () {
            {% load filters %}
            ko.applyBindings(new LottoDetailModel({{ day_journal|jsonify }}));
        });
    </script>
{% endblock %}

{% block content %}

    {{ day_journal }}

    <div class="page-header position-relative">
        <h1>
            Details for {{ day_journal.date }}
        </h1>
    </div>

    <div class="row-fluid collapse-group" data-bind="with: lotto_detail">
        <div><h2 data-bind="css: status()">Lotto Detail</h2>

        </div>

        <div class="collapse">
            <table class="table table-bordered table-striped table-acubor table-sortable">
                <thead>
                <tr>
                    <th rowspan="2">SN</th>
                    <th rowspan="2">Type</th>
                    <th rowspan="2">Rate in $</th>
                    <th rowspan="2">Day Opening</th>
                    <th colspan="4">Add: Purchase</th>
                    <th rowspan="2">Total</th>
                    <th colspan="2">Sold</th>
                    <th colspan="2">Day Closing</th>
                    <th colspan="2">Actual</th>
                    <th colspan="2">Difference</th>
                    <th></th>
                </tr>
                <tr>
                    <th>Pack</th>
                    <th>Qty</th>
                    <th>Total</th>
                    <th>Amt</th>
                    <th>Qty</th>
                    <th>Amt</th>
                    <th>Qty</th>
                    <th>Amt</th>
                    <th>Qty</th>
                    <th>Amt</th>
                    <th>Qty</th>
                    <th>Amt</th>
                    <th></th>
                </tr>
                </thead>

                <tbody id="lotto-detail">
                <!-- ko foreach: rows -->
                <tr data-bind="flash: true">
                    <td>
                        <span class="wid-pad pull-left" data-bind="text: $index()+1"> </span>
                    </td>
                    <td>
                        <select class="span12" data-bind="options: $root.accounts_by_tag(['Sales', 'Lotto', 'Lottery'], true), optionsText: 'name', optionsValue: 'id', value: account_id, optionsCaption: 'Choose an account..', select2: {}"></select>
                    </td>
                    <td data-bind="editableText: rate, numeric: true"></td>
                    <td data-bind="editableText: opening, numeric: true"></td>
                    <td data-bind="editableText: purchase_pack, numeric: true"></td>
                    <td data-bind="editableText: purchase_quantity, numeric: true"></td>
                    <td data-bind="editableText: purchase_total, numeric: true"></td>
                    <td data-bind="editableText: purchase_amount, numeric: true"></td>
                    <td data-bind="editableText: total, numeric: true"></td>
                    <td data-bind="editableText: sold_quantity, numeric: true"></td>
                    <td data-bind="editableText: sold_amount, numeric: true"></td>
                    <td data-bind="editableText: closing_quantity, numeric: true"></td>
                    <td data-bind="editableText: closing_amount, numeric: true"></td>
                    <td data-bind="editableText: actual_quantity, numeric: true"></td>
                    <td data-bind="editableText: actual_amount, numeric: true"></td>
                    <td data-bind="editableText: difference_quantity, numeric: true"></td>
                    <td data-bind="editableText: difference_amount, numeric: true"></td>
                    <td align="center">
                        <button class="close" data-bind="click: $parent.removeRow">&times;</button>
                    </td>
                </tr>
                <!-- /ko -->
                </tbody>
            </table>

            <span data-bind="text: message()"></span>
                    <span class="collapse-show-on-expand pull-right">
                        <button class="button" data-bind="click: addRow"><i class="icon-plus-sign" ></i> Add New Row</button>
                    <button class="button" data-bind="click: save"><i class="icon-save"></i> Save</button>
                    <button class="button" data-bind="click: reset">Reset</button>
                   </span>
        </div>
    </div>

{% endblock %}