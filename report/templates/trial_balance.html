{% extends "dashboard.html" %}

{% block title %}Trial Balance{% endblock %}

{% block head_end %}
    <script src="http://localhost/acubor_static/js/vendors/knockout.js"></script>
    <script src="http://localhost/acubor_static/js/ko_lib.js"></script>
    <script src="http://localhost/acubor_static/js/base.js"></script>
    <script src="http://localhost/acubor_static/js/trial_balance.js"></script>
    <link href="http://localhost/acubor_static/css/vendors/jquery.treetable.css" rel="stylesheet" type="text/css"/>
    <script src="http://localhost/acubor_static/js/vendors/jquery.treetable.js"></script>
    <script>
        $(document).ready(function () {
            {% load filters %}
            ko.applyBindings(new TrialBalance({{ dict|jsonify }}));
            $("#table1").treetable({initialState: 'expanded', clickableNodeNames: true}, true);
            {#            $("#table2").treetable({initialState: 'expanded', clickableNodeNames: true}, true);#}
        });
    </script>
{% endblock %}

{% block content %}

    <script id="categories" type="text/html">
        <tr data-bind="attr: {'data-tt-id': id, 'data-tt-parent-id': parent_id}">
            <td data-bind="text: name"></td>
            <td data-bind="text: code"></td>
            <td data-bind="text: dr_amount()"></td>
            <td data-bind="text: cr_amount()"></td>
        </tr>
        <!-- ko foreach: accounts -->
        <tr data-bind="attr: {'data-tt-id': id, 'data-tt-parent-id': parent_id}">
            <td data-bind="text: name"></td>
            <td data-bind="text: code"></td>
            <td data-bind="text: dr_amount()"></td>
            <td data-bind="text: cr_amount()"></td>
        </tr>
        <!-- /ko -->


        <!-- ko template: { name: 'categories',
                                foreach: categories } -->
        <!-- /ko -->


    </script>

    <div class="page-header position-relative">
        <h1>
            Trial Balance
        </h1>
    </div>

    {{ dict }}

    <table class="table table-bordered table-striped table-acubor table-sortable tree-table" id="table1">
        <thead>
        <tr>
            <th class="span4">Ledger</th>
            <th class="span3">Code</th>
            <th class="span2">Dr</th>
            <th class="span2">Cr</th>
        </tr>
        </thead>

        <tbody>
        <!-- ko template: { name: 'categories',
                                foreach: categories } -->
        <!-- /ko -->
        </tbody>
    </table>

{% endblock %}