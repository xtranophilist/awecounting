{% extends "dashboard.html" %}

{% block title %}Invoices{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    <li class="active"><a href="{% url "all_invoices" %}">Invoices</a></li>
{% endblock %}

{% block head_end %}
    <script type="text/javascript">
        $(document).ready(function () {
            $('.date-range').each(function (i, el) {
                $(el).find('input').datepicker({
                    format: 'yyyy-mm-dd'
                });
            });
        });
    </script>
{% endblock %}

{% load pagination_tags %}
{% load sorting_tags %}

{% block content %}

    <div class="page-header position-relative">
        <h1>
            Invoices
        </h1>
    </div>

    <form action="" method="get">
        {{ objects.form.as_p }}
        <input type="submit" value="Search"/>
    </form>

    {% autosort objects.qs as sorted_objects %}
    {% autopaginate sorted_objects 2 as paginated_objects %}

    <table class="table table-bordered table-striped table-sortable">
        <thead>
        <th>{% anchor invoice_no 'Invoice No' %}</th>
        <th>{% anchor party 'To' %}</th>
        <th>{% anchor date 'Date' %}</th>
        <th>{% anchor due_date 'Due Date' %}</th>
        </thead>
        <tbody>
        {% for item in paginated_objects %}
            <tr>
                <td>
                    <a href="{% url "view_invoice" item.invoice_no %}">
                        {{ item.invoice_no }}
                    </a>
                </td>
                <td>{{ item.party }}</td>
                <td>{{ item.date }}</td>
                <td>{{ item.due_date }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% paginate %}


{% endblock %}